
# RAG4Spice: æ™ºèƒ½HSPICEä»£ç ç”ŸæˆåŠ©æ‰‹
**RAG4Spice** æ˜¯ä¸€ä¸ªåŸºäºæ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰æŠ€æœ¯çš„æ™ºèƒ½å·¥å…·ï¼Œæ—¨åœ¨è§£å†³å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰åœ¨HSPICEç­‰ä¸“ç”¨é¢†åŸŸä»¿çœŸè¯­è¨€ä¸Šè®­ç»ƒæ•°æ®ä¸è¶³çš„é—®é¢˜ã€‚é€šè¿‡ç»“åˆæœ¬åœ°çŸ¥è¯†åº“ï¼Œæœ¬é¡¹ç›®å¯ä»¥æ ¹æ®ç”¨æˆ·çš„å®éªŒè¦æ±‚å’Œç”µè·¯ç½‘è¡¨ï¼Œè‡ªåŠ¨ç”Ÿæˆå‡†ç¡®ã€å¯æ‰§è¡Œçš„HSPICEä»¿çœŸä»£ç ã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

*   **OCRè¯†åˆ«**ï¼šè‡ªåŠ¨ä»ä¸Šä¼ çš„å®éªŒè¦æ±‚å›¾ç‰‡ä¸­æå–æ–‡æœ¬ã€‚
*   **æœ¬åœ°çŸ¥è¯†åº“**ï¼šåŸºäºæ‚¨æä¾›çš„HSPICEæ‰‹å†Œï¼ˆPDFï¼‰æ„å»ºå‘é‡æ•°æ®åº“ï¼Œç¡®ä¿ä¿¡æ¯çš„ä¸“ä¸šæ€§å’Œå‡†ç¡®æ€§ã€‚
*   **å¤šæ¨¡å‹æ”¯æŒ**ï¼šæ”¯æŒGoogle Geminiã€OpenAIã€Anthropic Claudeã€é˜¿é‡Œé€šä¹‰åƒé—®ã€ç™¾åº¦æ–‡å¿ƒä¸€è¨€ã€æ™ºè°±æ¸…è¨€ã€Kimiã€DeepSeekç­‰10+ç§ä¸»æµAIæ¨¡å‹ï¼Œç”¨æˆ·å¯è‡ªç”±é€‰æ‹©ã€‚
*   **æ™ºèƒ½ä»£ç ç”Ÿæˆ**ï¼šç»“åˆæ£€ç´¢åˆ°çš„ç›¸å…³çŸ¥è¯†ï¼Œåˆ©ç”¨é€‰å®šçš„AIæ¨¡å‹ç”Ÿæˆé«˜è´¨é‡çš„HSPICEä»£ç ã€‚
*   **Webç”¨æˆ·ç•Œé¢**ï¼šåŸºäºStreamlitæ„å»ºï¼Œæä¾›ç›´è§‚ã€æ˜“äºæ“ä½œçš„å›¾å½¢ç•Œé¢ã€‚

## ğŸ› ï¸ æŠ€æœ¯æ¶æ„

æœ¬é¡¹ç›®çš„æ ¸å¿ƒæ˜¯æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰æµç¨‹ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š

1.  **çŸ¥è¯†åº“æ„å»º (ç¦»çº¿)**ï¼š
    *   è¯»å–æŒ‡å®šçš„PDFæ–‡æ¡£ï¼ˆä¾‹å¦‚ `hspice_manual.pdf`ï¼‰ã€‚
    *   å°†æ–‡æ¡£å†…å®¹æ™ºèƒ½åˆ‡åˆ†æˆå°å—ï¼ˆChunksï¼‰ã€‚
    *   ä½¿ç”¨ `Sentence-Transformers` æ¨¡å‹å°†æ–‡æœ¬å—å‘é‡åŒ–ï¼ˆEmbeddingsï¼‰ã€‚
    *   å°†å‘é‡åŒ–åçš„æ•°æ®å­˜å…¥ `Chroma` æœ¬åœ°å‘é‡æ•°æ®åº“ã€‚

2.  **ä»£ç ç”Ÿæˆ (åœ¨çº¿)**ï¼š
    *   **ç”¨æˆ·è¾“å…¥**ï¼šç”¨æˆ·ä¸Šä¼ å®éªŒå›¾ç‰‡å¹¶é€šè¿‡OCRè¯†åˆ«å‡ºâ€œå®éªŒè¦æ±‚â€ï¼Œå¹¶æ‰‹åŠ¨è¾“å…¥â€œç”µè·¯ç½‘è¡¨â€ã€‚
    *   **æ£€ç´¢ (Retrieve)**ï¼šå°†â€œå®éªŒè¦æ±‚â€æ–‡æœ¬è¿›è¡Œå‘é‡åŒ–ï¼Œå¹¶åœ¨Chromaæ•°æ®åº“ä¸­è¿›è¡Œè¯­ä¹‰æœç´¢ï¼Œæ‰¾å‡ºæœ€ç›¸å…³çš„çŸ¥è¯†ç‰‡æ®µã€‚
    *   **å¢å¼º (Augment)**ï¼šå°†æ£€ç´¢åˆ°çš„çŸ¥è¯†ç‰‡æ®µã€ç”¨æˆ·çš„å®éªŒè¦æ±‚å’Œç”µè·¯ç½‘è¡¨ï¼Œä¸€åŒå¡«å…¥ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„Promptæ¨¡æ¿ä¸­ã€‚
    *   **ç”Ÿæˆ (Generate)**ï¼šå°†å¡«å……å¥½çš„Promptå‘é€ç»™Google Gemini Proæ¨¡å‹ï¼Œç”Ÿæˆæœ€ç»ˆçš„HSPICEä»£ç ã€‚

```mermaid
graph TD
    A[ç”¨æˆ·ä¸Šä¼ å®éªŒå›¾ç‰‡/è¾“å…¥ç½‘è¡¨] --> B{Streamlit UI};
    B --> C[OCRæå–å®éªŒè¦æ±‚];
    C --> D{Embeddingæ¨¡å‹};
    D --> E[Chromaå‘é‡æ•°æ®åº“];
    E -- æ£€ç´¢æœ€ç›¸å…³çš„çŸ¥è¯† --> F{Promptæ¨¡æ¿};
    C -- å®éªŒè¦æ±‚ --> F;
    A -- ç”µè·¯ç½‘è¡¨ --> F;
    F --> G[Google Gemini API];
    G --> H[ç”Ÿæˆçš„HSPICEä»£ç ];
    H --> B;
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤åœ¨ä½ çš„æœ¬åœ°ç¯å¢ƒä¸­é…ç½®å¹¶è¿è¡Œæœ¬é¡¹ç›®ã€‚

### 1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/your-username/RAG4Spice.git
cd RAG4Spice
```

### 2. åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
æ¨èä½¿ç”¨ `uv` æˆ– `venv` æ¥ç®¡ç†Pythonç¯å¢ƒã€‚
```bash
# ä½¿ç”¨ uv
uv venv
source .venv/bin/activate  # On Windows, use: .venv\Scripts\activate

# æˆ–è€…ä½¿ç”¨ venv
python -m venv .venv
source .venv/bin/activate  # On Windows, use: .venv\Scripts\activate
```

### 3. å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

### 4. å®‰è£… Tesseract-OCR
æœ¬é¡¹ç›®ä½¿ç”¨ `pytesseract` è¿›è¡Œå…‰å­¦å­—ç¬¦è¯†åˆ«ï¼Œå®ƒä¾èµ–äºGoogleçš„Tesseract-OCRå¼•æ“ã€‚
*   è¯·ä» [Tesseractå®˜æ–¹ä¸‹è½½é¡µé¢](https://github.com/UB-Mannheim/tesseract/wiki) ä¸‹è½½å¹¶å®‰è£…é€‚åˆä½ æ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬ã€‚
*   **é‡è¦**: åœ¨å®‰è£…è¿‡ç¨‹ä¸­ï¼Œè¯·è®°ä½ä½ çš„Tesseractå®‰è£…è·¯å¾„ï¼ˆä¾‹å¦‚ `D:/Tesseract/tesseract.exe`ï¼‰ã€‚

### 5. é…ç½®ç¯å¢ƒå˜é‡
æœ¬é¡¹ç›®ä½¿ç”¨ `.env` æ–‡ä»¶æ¥ç®¡ç†å¯†é’¥å’Œé…ç½®ã€‚
1.  å°† `.env.example` æ–‡ä»¶å¤åˆ¶å¹¶é‡å‘½åä¸º `.env`ã€‚
2.  æ‰“å¼€ `.env` æ–‡ä»¶å¹¶å¡«å…¥ä»¥ä¸‹ä¿¡æ¯ï¼š
    *   `GOOGLE_API_KEY`: ä½ ä» Google AI Studio è·å–çš„ Gemini API å¯†é’¥ã€‚
    *   `TESSERACT_CMD`: ä½ çš„ Tesseract-OCR å¯æ‰§è¡Œæ–‡ä»¶çš„å®Œæ•´è·¯å¾„ã€‚
    *   **å¤šæ¨¡å‹æ”¯æŒ**: ç°å·²æ”¯æŒ10+ç§AIæ¨¡å‹ï¼Œå¯é…ç½®å¯¹åº”APIå¯†é’¥ï¼ˆè¯¦è§ `.env.example`ï¼‰

```dotenv
# .env file example (æ”¯æŒå¤šæ¨¡å‹)
GOOGLE_API_KEY="your_google_api_key_here"
OPENAI_API_KEY="your_openai_api_key_here"
ANTHROPIC_API_KEY="your_anthropic_api_key_here"
DASHSCOPE_API_KEY="your_dashscope_api_key_here"  # é˜¿é‡Œäº‘é€šä¹‰åƒé—®
ZHIPUAI_API_KEY="your_zhipuai_api_key_here"      # æ™ºè°±æ¸…è¨€
MOONSHOT_API_KEY="your_moonshot_api_key_here"      # Kimi
DEEPSEEK_API_KEY="your_deepseek_api_key_here"      # DeepSeek
TESSERACT_CMD="D:/Tesseract/tesseract.exe" # Windowsç¤ºä¾‹è·¯å¾„
# TESSERACT_CMD="/usr/bin/tesseract" # Linuxç¤ºä¾‹è·¯å¾„
```

ğŸ“– **è¯¦ç»†çš„å¤šæ¨¡å‹é…ç½®æŒ‡å—**: è¯·æŸ¥çœ‹ [MULTI_MODEL_GUIDE.md](./MULTI_MODEL_GUIDE.md) äº†è§£å¦‚ä½•é…ç½®å’Œä½¿ç”¨ä¸åŒçš„AIæ¨¡å‹ã€‚

### 6. æ„å»ºæœ¬åœ°çŸ¥è¯†åº“
```bash
python build_database.py
```
æˆåŠŸåï¼Œä½ ä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹çœ‹åˆ°ä¸€ä¸ª `hspice_db` æ–‡ä»¶å¤¹ã€‚

### 7. è¿è¡Œåº”ç”¨
ä¸€åˆ‡å‡†å¤‡å°±ç»ªï¼è¿è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨Streamlitåº”ç”¨ã€‚
```bash
streamlit run app.py
```
åº”ç”¨å¯åŠ¨åï¼Œæµè§ˆå™¨å°†è‡ªåŠ¨æ‰“å¼€ä¸€ä¸ªæœ¬åœ°ç½‘å€ï¼Œä½ å°±å¯ä»¥å¼€å§‹ä½¿ç”¨äº†ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
RAG4Spice/
â”œâ”€â”€ src/                    # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ config/             # é…ç½®ç®¡ç†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ settings.py     # ç»Ÿä¸€é…ç½®ç®¡ç†
â”‚   â”‚   â””â”€â”€ models.py       # æ¨¡å‹é…ç½®å®šä¹‰
â”‚   â”œâ”€â”€ core/               # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ database.py     # å‘é‡æ•°æ®åº“ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ llm.py         # LLMäº¤äº’
â”‚   â”‚   â”œâ”€â”€ multi_llm.py    # å¤šæ¨¡å‹æ”¯æŒ
â”‚   â”‚   â””â”€â”€ retrieval.py   # æ£€ç´¢é€»è¾‘
â”‚   â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ ocr.py         # OCRå¤„ç†
â”‚   â”‚   â”œâ”€â”€ pdf_parser.py  # PDFè§£æ
â”‚   â”‚   â”œâ”€â”€ text_processing.py # æ–‡æœ¬å¤„ç†
â”‚   â”‚   â””â”€â”€ validators.py  # æ•°æ®éªŒè¯
â”‚   â”œâ”€â”€ ui/                 # ç”¨æˆ·ç•Œé¢æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ components.py   # UIç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages.py       # é¡µé¢é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ model_selector.py # æ¨¡å‹é€‰æ‹©å™¨
â”‚   â”‚   â””â”€â”€ model_config_flow.py # æ¨¡å‹é…ç½®æµç¨‹
â”‚   â””â”€â”€ models/             # æ•°æ®æ¨¡å‹
â”‚       â””â”€â”€ task_models.py   # ä»»åŠ¡æ•°æ®æ¨¡å‹
â”œâ”€â”€ hspice_db/             # ç”Ÿæˆçš„å‘é‡æ•°æ®åº“
â”œâ”€â”€ resource/              # å­˜æ”¾ç”¨äºæ„å»ºçŸ¥è¯†åº“çš„æºæ–‡ä»¶ (å¦‚.pdf)
â”œâ”€â”€ .env                   # å­˜å‚¨ä½ çš„APIå¯†é’¥å’Œé…ç½® (ç§å¯†)
â”œâ”€â”€ .env.example           # .envæ–‡ä»¶çš„æ¨¡æ¿
â”œâ”€â”€ .gitignore             # Gitå¿½ç•¥æ–‡ä»¶é…ç½®
â”œâ”€â”€ app.py                 # Streamlitåº”ç”¨ä¸»ç¨‹åº (é‡æ„å)
â”œâ”€â”€ build_database.py      # æ„å»ºå‘é‡æ•°æ®åº“çš„è„šæœ¬ (é‡æ„å)
â”œâ”€â”€ requirements.txt        # é¡¹ç›®ä¾èµ– (æ¸…ç†å)
â”œâ”€â”€ MULTI_MODEL_GUIDE.md   # å¤šæ¨¡å‹é…ç½®æŒ‡å—
â””â”€â”€ README.md             # é¡¹ç›®æ–‡æ¡£
```


## ğŸ”® æœªæ¥è®¡åˆ’
### ç”¨æˆ·å‹å¥½
*   [x] æ”¾å®½ä¼ å…¥æ–‡ä»¶çš„æ ¼å¼é™åˆ¶ï¼Œä½¿å¾—ç”¨æˆ·å¯ä»¥ä¸Šä¼ PDFç­‰ã€‚
*   [x] âœ¨ æ–°å¢å¤šæ¨¡å‹æ”¯æŒ: ç”¨æˆ·å¯ä»¥é€‰æ‹©10+ç§å›½å†…å¤–AIæ¨¡å‹çš„å®˜æ–¹APIï¼ŒåŒ…æ‹¬Googleã€OpenAIã€Claudeã€é€šä¹‰åƒé—®ã€æ–‡å¿ƒä¸€è¨€ã€æ™ºè°±æ¸…è¨€ã€Kimiã€DeepSeekç­‰ã€‚
*   [x] æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰urlå’Œæ¨¡å‹API
*   [ ] åšæˆä¸€ä¸ªåœ¨çº¿ç½‘å€
*   [ ] åŠ å…¥ç¼“å­˜æœºåˆ¶ï¼Œä½¿å¾—ç”¨æˆ·ä¸éœ€è¦é‡å¤åˆ©ç”¨ç®—åŠ›ç”Ÿæˆ
### æ£€ç´¢æœºåˆ¶
*   [ ] ä¼˜åŒ–æ–‡æœ¬åˆ‡å‰²ï¼ˆChunkingï¼‰ç­–ç•¥ä»¥æé«˜æ£€ç´¢ç²¾åº¦ã€‚
*   [ ] å¼•å…¥Re-rankingæ¨¡å‹è¿›ä¸€æ­¥ä¼˜åŒ–æ£€ç´¢ç»“æœã€‚
*   [x] ä¼˜åŒ–Workflowï¼Œæå‡æ¨¡å‹è¾“å‡ºçš„ç²¾ç¡®æ€§ã€‚



